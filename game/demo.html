<head>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div style="display:flex;">
        <div style="margin-right:10px;">
            <table id="comparison" border="1">
                <thead>
                    <tr></tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
        <div style="margin-right:10px;">
            <table id="board" border="1">
                <thead>
                    <tr></tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
        <div>
            <div style="font-size:larger">
                Total attack cost: <span id="attackcost"></span>
                <br>
                Total defend cost: <span id="defendcost"></span>
                <br>
                Total value: <span id="total"></span>
                <br>
                Matches: <span id="matches"></span>
            </div>
            <div style="margin-top:15px">
                attacker: <select id="pickatk"></select>
                capacity: <input id="atkcap" type="number" value=10>
                <br>
                defender: <select id="pickdef"></select>
                capacity: <input id="defcap" type="number" value="10">
                <br>
                <button id="newboard" type="button">New board</button>
                <br>
                <br>
                count: <input id="simcount" type="number" value="1000">
                <br>
                <button id="sim" type="button">Simulate</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { generateBoard } from "./modules/board.mjs";
        import { strategies, evaluateStrategies, evalFor } from "./modules/solver.mjs";
        import { renderAll, renderBoard } from "./modules/renderer.mjs"

        const state = {
            board: generateBoard(),
            attacking: new Set(),
            defending: new Set(),
        };
        window.state = state;

        console.log(evaluateStrategies());


        document.querySelector("#newboard").addEventListener("click", e=>{
            const atkStrat = document.querySelector("#pickatk").value;
            const atkCap = document.querySelector("#atkcap").value;
            const defStrat = document.querySelector("#pickdef").value;
            const defCap = document.querySelector("#atkcap").value;
            state.board = generateBoard();
            state.attacking = evalFor(strategies[atkStrat], "attacker", state.board, atkCap);
            state.defending = evalFor(strategies[defStrat], "defender", state.board, defCap);
            renderBoard(state);
        });
        
        document.querySelector("#simcount").addEventListener("click", e=>{

        });

        renderAll(state);
    </script>
</body>